(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[671],{960:(e,t,r)=>{"use strict";r.d(t,{Ih:()=>a,QW:()=>l,Rw:()=>i,eD:()=>s});let n=r(636).env.NEXT_PUBLIC_API_URL||"http://localhost:8080";async function o(e,t){try{let r=await fetch("".concat(n).concat(e),{...t,headers:{"Content-Type":"application/json",...null==t?void 0:t.headers}});if(!r.ok){let e=await r.text();return{data:null,error:e||"HTTP ".concat(r.status)}}return{data:await r.json(),error:null}}catch(e){return{data:null,error:e instanceof Error?e.message:"Unknown error"}}}async function i(e){return o("/agents/".concat(e,"/restart"),{method:"POST"})}async function a(e){return o("/agents/".concat(e,"/start"),{method:"POST"})}async function s(e){return o("/agents/".concat(e,"/stop"),{method:"POST"})}async function l(e,t){return o("/escalations/".concat(e,"/respond"),{method:"POST",body:JSON.stringify({response:t})})}},1853:(e,t,r)=>{Promise.resolve().then(r.bind(r,7217))},1977:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(5155),o=r(4049),i=r(8010),a=r(690),s=r(5635),l=r(6530);function c(e){let{error:t,onRetry:r}=e,c=t instanceof Error?t.message:t;return(0,n.jsx)(o.A,{sx:{p:2},children:(0,n.jsx)(i.A,{severity:"error",action:r&&(0,n.jsx)(a.A,{color:"inherit",size:"small",onClick:r,startIcon:(0,n.jsx)(l.A,{}),children:"Retry"}),children:(0,n.jsx)(s.A,{variant:"body2",children:c})})})}},2328:(e,t,r)=>{"use strict";r.d(t,{gf:()=>s});var n=r(3903);let o=r(636).env.NEXT_PUBLIC_API_URL||"http://localhost:8080",i=async e=>{let t=await fetch("".concat(o).concat(e));if(!t.ok)throw Error("HTTP ".concat(t.status));return t.json()},a={refreshInterval:5e3,revalidateOnFocus:!0,dedupingInterval:2e3};function s(e,t){return(0,n.Ay)(e,i,{...a,...t})}},2379:(e,t,r)=>{"use strict";r.d(t,{A:()=>A});var n=r(2115),o=r(7079),i=r(2549),a=r(9488),s=r(3567),l=r(7250),c=r(9582),d=r(5155);function u(e){return"scale(".concat(e,", ").concat(e**2,")")}let p={entering:{opacity:1,transform:u(1)},entered:{opacity:1,transform:"none"}},h="undefined"!=typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),x=n.forwardRef(function(e,t){let{addEndListener:r,appear:x=!0,children:A,easing:f,in:m,onEnter:g,onEntered:v,onEntering:y,onExit:j,onExited:b,onExiting:w,style:S,timeout:k="auto",TransitionComponent:C=a.Ay,...W}=e,D=(0,o.A)(),R=n.useRef(),M=(0,s.A)(),T=n.useRef(null),P=(0,c.A)(T,(0,i.A)(A),t),E=e=>t=>{if(e){let r=T.current;void 0===t?e(r):e(r,t)}},N=E(y),I=E((e,t)=>{let r;(0,l.q)(e);let{duration:n,delay:o,easing:i}=(0,l.c)({style:S,timeout:k,easing:f},{mode:"enter"});"auto"===k?R.current=r=M.transitions.getAutoHeightDuration(e.clientHeight):r=n,e.style.transition=[M.transitions.create("opacity",{duration:r,delay:o}),M.transitions.create("transform",{duration:h?r:.666*r,delay:o,easing:i})].join(","),g&&g(e,t)}),F=E(v),_=E(w),L=E(e=>{let t,{duration:r,delay:n,easing:o}=(0,l.c)({style:S,timeout:k,easing:f},{mode:"exit"});"auto"===k?R.current=t=M.transitions.getAutoHeightDuration(e.clientHeight):t=r,e.style.transition=[M.transitions.create("opacity",{duration:t,delay:n}),M.transitions.create("transform",{duration:h?t:.666*t,delay:h?n:n||.333*t,easing:o})].join(","),e.style.opacity=0,e.style.transform=u(.75),j&&j(e)}),z=E(b);return(0,d.jsx)(C,{appear:x,in:m,nodeRef:T,onEnter:I,onEntered:F,onEntering:N,onExit:L,onExited:z,onExiting:_,addEndListener:e=>{"auto"===k&&D.start(R.current||0,e),r&&r(T.current,e)},timeout:"auto"===k?null:k,...W,children:(e,t)=>{let{ownerState:r,...o}=t;return n.cloneElement(A,{style:{opacity:0,transform:u(.75),visibility:"exited"!==e||m?void 0:"hidden",...p[e],...S,...A.props.style},ref:P,...o})}})});x&&(x.muiSupportAuto=!0);let A=x},4269:(e,t,r)=>{"use strict";function n(e){let t=new Date,r=new Date(e),n=Math.floor((t.getTime()-r.getTime())/1e3),o=Math.floor(n/60),i=Math.floor(o/60),a=Math.floor(i/24);return n<60?"just now":o<60?"".concat(o,"m ago"):i<24?"".concat(i,"h ago"):a<7?"".concat(a,"d ago"):r.toLocaleDateString()}function o(e){return new Date(e).toLocaleString()}r.d(t,{Yq:()=>o,mo:()=>n})},6782:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(2115);let o=function(e){let{controlled:t,default:r,name:o,state:i="value"}=e,{current:a}=n.useRef(void 0!==t),[s,l]=n.useState(r),c=n.useCallback(e=>{a||l(e)},[]);return[a?t:s,c]}},6915:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(365),o=r(9808),i=r(5217),a=r(2979);let s=function(e){var t;let{elementType:r,externalSlotProps:s,ownerState:l,skipResolvingSlotProps:c=!1,...d}=e,u=c?{}:(0,a.A)(s,l),{props:p,internalRef:h}=(0,i.A)({...d,externalSlotProps:u}),x=(0,n.A)(h,null==u?void 0:u.ref,null==(t=e.additionalProps)?void 0:t.ref);return(0,o.A)(r,{...p,ref:x},l)}},7045:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(6697),o=r(5155);let i=(0,n.A)((0,o.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning")},7055:(e,t,r)=>{"use strict";r.d(t,{aX:()=>o,zu:()=>i});var n=r(2328);function o(){return(0,n.gf)("/decisions/pending")}function i(){return(0,n.gf)("/escalations/pending")}},7217:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ei});var n=r(5155),o=r(2115),i=r(4049),a=r(5635),s=r(9767),l=r(4578),c=r(3070),d=r(6963),u=r(2456),p=r(4792),h=r(1356),x=r(5202),A=r(8548),f=r(690),m=r(2821),g=r(7001),v=r(9347),y=r(1852),j=r(7346),b=r(5421),w=r(2300),S=r(5795),k=r(5195);function C(e){return(0,k.Ay)("MuiDialog",e)}let W=(0,S.A)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),D=o.createContext({});var R=r(3526),M=r(9960),T=r(3567),P=r(6964),E=r(6625),N=r(7765);let I=(0,M.Ay)(R.A,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),F=(0,M.Ay)(j.A,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),_=(0,M.Ay)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.container,t["scroll".concat((0,y.A)(r.scroll))]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),L=(0,M.Ay)(w.A,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.paper,t["scrollPaper".concat((0,y.A)(r.scroll))],t["paperWidth".concat((0,y.A)(String(r.maxWidth)))],r.fullWidth&&t.paperFullWidth,r.fullScreen&&t.paperFullScreen]}})((0,P.A)(e=>{let{theme:t}=e;return{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:e=>{let{ownerState:t}=e;return!t.maxWidth},style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:"px"===t.breakpoints.unit?Math.max(t.breakpoints.values.xs,444):"max(".concat(t.breakpoints.values.xs).concat(t.breakpoints.unit,", 444px)"),["&.".concat(W.paperScrollBody)]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(t.breakpoints.values).filter(e=>"xs"!==e).map(e=>({props:{maxWidth:e},style:{maxWidth:"".concat(t.breakpoints.values[e]).concat(t.breakpoints.unit),["&.".concat(W.paperScrollBody)]:{[t.breakpoints.down(t.breakpoints.values[e]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:e=>{let{ownerState:t}=e;return t.fullWidth},style:{width:"calc(100% - 64px)"}},{props:e=>{let{ownerState:t}=e;return t.fullScreen},style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,["&.".concat(W.paperScrollBody)]:{margin:0,maxWidth:"100%"}}}]}})),z=o.forwardRef(function(e,t){let r=(0,E.b)({props:e,name:"MuiDialog"}),i=(0,T.A)(),a={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":s,"aria-labelledby":l,"aria-modal":c=!0,BackdropComponent:d,BackdropProps:u,children:p,className:h,disableEscapeKeyDown:x=!1,fullScreen:A=!1,fullWidth:f=!1,maxWidth:j="sm",onBackdropClick:S,onClick:k,onClose:W,open:R,PaperComponent:M=w.A,PaperProps:P={},scroll:z="paper",slots:B={},slotProps:H={},TransitionComponent:O=b.A,transitionDuration:X=a,TransitionProps:Y,...U}=r,q={...r,disableEscapeKeyDown:x,fullScreen:A,fullWidth:f,maxWidth:j,scroll:z},Q=(e=>{let{classes:t,scroll:r,maxWidth:n,fullWidth:o,fullScreen:i}=e,a={root:["root"],container:["container","scroll".concat((0,y.A)(r))],paper:["paper","paperScroll".concat((0,y.A)(r)),"paperWidth".concat((0,y.A)(String(n))),o&&"paperFullWidth",i&&"paperFullScreen"]};return(0,g.A)(a,C,t)})(q),J=o.useRef(),K=(0,v.A)(l),G=o.useMemo(()=>({titleId:K}),[K]),V={slots:{transition:O,...B},slotProps:{transition:Y,paper:P,backdrop:u,...H}},[Z,$]=(0,N.A)("root",{elementType:F,shouldForwardComponentProp:!0,externalForwardedProps:V,ownerState:q,className:(0,m.A)(Q.root,h),ref:t}),[ee,et]=(0,N.A)("backdrop",{elementType:I,shouldForwardComponentProp:!0,externalForwardedProps:V,ownerState:q}),[er,en]=(0,N.A)("paper",{elementType:L,shouldForwardComponentProp:!0,externalForwardedProps:V,ownerState:q,className:(0,m.A)(Q.paper,P.className)}),[eo,ei]=(0,N.A)("container",{elementType:_,externalForwardedProps:V,ownerState:q,className:(0,m.A)(Q.container)}),[ea,es]=(0,N.A)("transition",{elementType:b.A,externalForwardedProps:V,ownerState:q,additionalProps:{appear:!0,in:R,timeout:X,role:"presentation"}});return(0,n.jsx)(Z,{closeAfterTransition:!0,slots:{backdrop:ee},slotProps:{backdrop:{transitionDuration:X,as:d,...et}},disableEscapeKeyDown:x,onClose:W,open:R,onClick:e=>{k&&k(e),J.current&&(J.current=null,S&&S(e),W&&W(e,"backdropClick"))},...$,...U,children:(0,n.jsx)(ea,{...es,children:(0,n.jsx)(eo,{onMouseDown:e=>{J.current=e.target===e.currentTarget},...ei,children:(0,n.jsx)(er,{as:M,elevation:24,role:"dialog","aria-describedby":s,"aria-labelledby":K,"aria-modal":c,...en,children:(0,n.jsx)(D.Provider,{value:G,children:p})})})})})});function B(e){return(0,k.Ay)("MuiDialogTitle",e)}let H=(0,S.A)("MuiDialogTitle",["root"]),O=(0,M.Ay)(a.A,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),X=o.forwardRef(function(e,t){let r=(0,E.b)({props:e,name:"MuiDialogTitle"}),{className:i,id:a,...s}=r,l=(e=>{let{classes:t}=e;return(0,g.A)({root:["root"]},B,t)})(r),{titleId:c=a}=o.useContext(D);return(0,n.jsx)(O,{component:"h2",className:(0,m.A)(l.root,i),ownerState:r,ref:t,variant:"h6",id:null!=a?a:c,...s})});function Y(e){return(0,k.Ay)("MuiDialogContent",e)}(0,S.A)("MuiDialogContent",["root","dividers"]);let U=(0,M.Ay)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.dividers&&t.dividers]}})((0,P.A)(e=>{let{theme:t}=e;return{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:e=>{let{ownerState:t}=e;return t.dividers},style:{padding:"16px 24px",borderTop:"1px solid ".concat((t.vars||t).palette.divider),borderBottom:"1px solid ".concat((t.vars||t).palette.divider)}},{props:e=>{let{ownerState:t}=e;return!t.dividers},style:{[".".concat(H.root," + &")]:{paddingTop:0}}}]}})),q=o.forwardRef(function(e,t){let r=(0,E.b)({props:e,name:"MuiDialogContent"}),{className:o,dividers:i=!1,...a}=r,s={...r,dividers:i},l=(e=>{let{classes:t,dividers:r}=e;return(0,g.A)({root:["root",r&&"dividers"]},Y,t)})(s);return(0,n.jsx)(U,{className:(0,m.A)(l.root,o),ownerState:s,ref:t,...a})});var Q=r(5967);function J(e){return(0,k.Ay)("MuiDialogActions",e)}(0,S.A)("MuiDialogActions",["root","spacing"]);let K=(0,M.Ay)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,!r.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:e=>{let{ownerState:t}=e;return!t.disableSpacing},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),G=o.forwardRef(function(e,t){let r=(0,E.b)({props:e,name:"MuiDialogActions"}),{className:o,disableSpacing:i=!1,...a}=r,s={...r,disableSpacing:i},l=(e=>{let{classes:t,disableSpacing:r}=e;return(0,g.A)({root:["root",!r&&"spacing"]},J,t)})(s);return(0,n.jsx)(K,{className:(0,m.A)(l.root,o),ownerState:s,ref:t,...a})});var V=r(7055),Z=r(960),$=r(4269),ee=r(9555),et=r(1977),er=r(7671),en=r(7045);let eo={pending:"#ffa502",resolved:"#00ff88"};function ei(){let{data:e,error:t,isLoading:r,mutate:m}=(0,V.zu)(),[g,v]=(0,o.useState)(null),[y,j]=(0,o.useState)(""),[b,w]=(0,o.useState)(!1),S=async()=>{if(g&&y.trim()){w(!0);try{await (0,Z.QW)(g.id,y),m(),v(null),j("")}catch(e){console.error("Failed to respond:",e)}finally{w(!1)}}};return r?(0,n.jsx)(ee.A,{message:"Loading escalations..."}):t?(0,n.jsx)(et.A,{error:t,onRetry:()=>m()}):(0,n.jsxs)(i.A,{children:[(0,n.jsx)(a.A,{variant:"h4",gutterBottom:!0,sx:{fontWeight:700},children:"Escalations"}),(0,n.jsx)(a.A,{variant:"body2",color:"text.secondary",sx:{mb:4},children:"Issues requiring human intervention"}),(null==e?void 0:e.length)?(0,n.jsx)(s.A,{children:(0,n.jsx)(l.A,{children:(0,n.jsx)(c.A,{children:(0,n.jsxs)(d.A,{children:[(0,n.jsx)(u.A,{children:(0,n.jsxs)(p.A,{children:[(0,n.jsx)(h.A,{children:"Reason"}),(0,n.jsx)(h.A,{children:"Status"}),(0,n.jsx)(h.A,{children:"Channels Notified"}),(0,n.jsx)(h.A,{children:"Created"}),(0,n.jsx)(h.A,{children:"Actions"})]})}),(0,n.jsx)(x.A,{children:e.map(e=>{var t;return(0,n.jsxs)(p.A,{hover:!0,children:[(0,n.jsx)(h.A,{children:(0,n.jsx)(a.A,{variant:"body2",children:e.reason})}),(0,n.jsx)(h.A,{children:(0,n.jsx)(A.A,{label:e.status,size:"small",sx:{backgroundColor:"".concat(eo[e.status]||"#666","20"),color:eo[e.status]||"#666",fontWeight:600}})}),(0,n.jsx)(h.A,{children:(null==(t=e.channelsNotified)?void 0:t.join(", "))||"None"}),(0,n.jsx)(h.A,{sx:{whiteSpace:"nowrap"},children:(0,$.mo)(e.createdAt)}),(0,n.jsx)(h.A,{children:"pending"===e.status&&(0,n.jsx)(f.A,{size:"small",variant:"contained",color:"primary",onClick:()=>v(e),children:"Respond"})})]},e.id)})})]})})})}):(0,n.jsx)(er.A,{title:"No pending escalations",description:"No issues require human intervention at this time.",icon:(0,n.jsx)(en.A,{sx:{fontSize:64}})}),(0,n.jsxs)(z,{open:!!g,onClose:()=>v(null),maxWidth:"sm",fullWidth:!0,children:[(0,n.jsx)(X,{children:"Respond to Escalation"}),(0,n.jsxs)(q,{children:[(0,n.jsx)(a.A,{variant:"body2",color:"text.secondary",sx:{mb:2},children:null==g?void 0:g.reason}),(0,n.jsx)(Q.A,{autoFocus:!0,multiline:!0,rows:4,fullWidth:!0,label:"Your Response",value:y,onChange:e=>j(e.target.value),placeholder:"Enter your decision or instructions..."})]}),(0,n.jsxs)(G,{children:[(0,n.jsx)(f.A,{onClick:()=>v(null),children:"Cancel"}),(0,n.jsx)(f.A,{onClick:S,variant:"contained",disabled:!y.trim()||b,children:b?"Submitting...":"Submit Response"})]})]})]})}},7671:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(5155),o=r(4049),i=r(5635),a=r(8089);function s(e){let{title:t="No data",description:r,icon:s,action:l}=e;return(0,n.jsxs)(o.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:200,gap:2,p:4},children:[(0,n.jsx)(o.A,{sx:{color:"text.secondary",opacity:.5},children:s||(0,n.jsx)(a.A,{sx:{fontSize:64}})}),(0,n.jsx)(i.A,{variant:"h6",color:"text.secondary",children:t}),r&&(0,n.jsx)(i.A,{variant:"body2",color:"text.secondary",textAlign:"center",children:r}),l]})}},9555:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(5155),o=r(4049),i=r(4474),a=r(5635);function s(e){let{message:t="Loading..."}=e;return(0,n.jsxs)(o.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:200,gap:2},children:[(0,n.jsx)(i.A,{color:"primary"}),(0,n.jsx)(a.A,{variant:"body2",color:"text.secondary",children:t})]})}}},e=>{e.O(0,[495,311,591,854,658,967,441,255,358],()=>e(e.s=1853)),_N_E=e.O()}]);